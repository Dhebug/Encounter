/*
_picture_font_1
    .byt  $55,$55,$55,$55,$55,$55,$55,$55
    .byt  $55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55
    .byt  $55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55
    .byt  $55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55
    .byt  $55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55
    .byt  $55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55
    .byt  $55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55
    .byt  $55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55
    .byt  $55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55
    .byt  $55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55
    .byt  $55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55
    .byt  $55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55
    .byt  $55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55
    .byt  $55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55
    .byt  $55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55
    .byt  $55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55,$55
    .byt  $55,$55,$55,$55,$55,$55,$55,$55,$00,$00,$00,$00,$00,$00,$00,$00
    .byt  $0c,$0c,$0c,$0c,$0c,$00,$0c,$00,$14,$14,$14,$00,$00,$00,$00,$00
    .byt  $14,$14,$3e,$14,$3e,$14,$14,$00,$08,$1e,$28,$1c,$0a,$3c,$08,$00
    .byt  $30,$32,$04,$08,$10,$26,$06,$00,$10,$28,$28,$10,$2a,$24,$1a,$00
    .byt  $08,$08,$08,$00,$00,$00,$00,$00,$0c,$10,$30,$30,$30,$10,$0c,$00
    .byt  $18,$04,$06,$06,$06,$04,$18,$00,$08,$2a,$1c,$08,$1c,$2a,$08,$00
    .byt  $00,$08,$08,$3e,$08,$08,$00,$00,$00,$00,$00,$00,$00,$0c,$0c,$18
    .byt  $00,$00,$00,$3e,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0c,$00,$00
    .byt  $00,$02,$04,$08,$10,$20,$00,$00,$1c,$22,$22,$00,$22,$22,$1c,$00
    .byt  $00,$02,$02,$00,$02,$02,$00,$00,$1c,$02,$02,$1c,$20,$20,$1c,$00
    .byt  $1c,$02,$02,$1c,$02,$02,$1c,$00,$00,$22,$22,$1c,$02,$02,$00,$00
    .byt  $1c,$20,$20,$1c,$02,$02,$1c,$00,$1c,$20,$20,$1c,$22,$22,$1c,$00
    .byt  $1c,$02,$02,$00,$02,$02,$00,$00,$1c,$22,$22,$1c,$22,$22,$1c,$00
    .byt  $1c,$22,$22,$1c,$02,$02,$1c,$00,$00,$00,$0c,$00,$00,$0c,$00,$00
    .byt  $00,$00,$0c,$00,$00,$0c,$0c,$18,$04,$08,$10,$20,$10,$08,$04,$00
    .byt  $00,$00,$3e,$00,$3e,$00,$00,$00,$10,$08,$04,$02,$04,$08,$10,$00
    .byt  $1c,$22,$04,$08,$08,$00,$08,$00,$1c,$22,$2a,$2e,$2c,$20,$1e,$00
    .byt  $38,$04,$32,$32,$3e,$32,$32,$00,$38,$04,$32,$3c,$32,$32,$3c,$00
    .byt  $3e,$00,$30,$30,$30,$30,$3e,$00,$38,$04,$32,$32,$32,$32,$3c,$00
    .byt  $3e,$00,$30,$3c,$30,$30,$3e,$00,$3e,$00,$30,$3c,$30,$30,$30,$00
    .byt  $3e,$00,$30,$30,$36,$32,$1e,$00,$32,$02,$32,$3e,$32,$32,$32,$00
    .byt  $1e,$00,$0c,$0c,$0c,$0c,$1e,$00,$06,$00,$06,$06,$06,$26,$1e,$00
    .byt  $32,$02,$34,$38,$34,$32,$32,$00,$30,$00,$30,$30,$30,$30,$3e,$00
    .byt  $32,$0e,$32,$32,$32,$32,$32,$00,$32,$02,$32,$3a,$36,$32,$32,$00
    .byt  $1c,$02,$32,$32,$32,$32,$1c,$00,$3c,$02,$32,$3c,$30,$30,$30,$00
    .byt  $1c,$02,$32,$32,$32,$34,$1a,$00,$3c,$02,$32,$3c,$38,$34,$32,$00
    .byt  $3e,$02,$30,$3e,$02,$32,$3e,$00,$3c,$00,$18,$18,$18,$18,$18,$00
    .byt  $32,$02,$32,$32,$32,$32,$1c,$00,$32,$02,$32,$32,$32,$34,$38,$00
    .byt  $32,$02,$32,$32,$32,$3e,$32,$00,$32,$02,$14,$08,$14,$32,$32,$00
    .byt  $32,$02,$32,$14,$08,$08,$08,$00,$3e,$00,$06,$0c,$18,$30,$3e,$00
    .byt  $1e,$10,$10,$10,$10,$10,$1e,$00,$00,$20,$10,$08,$04,$02,$00,$00
    .byt  $3c,$04,$04,$04,$04,$04,$3c,$00,$08,$14,$2a,$08,$08,$08,$08,$00
    .byt  $0e,$10,$10,$10,$3c,$10,$3e,$00,$1e,$21,$2d,$29,$29,$2d,$21,$1e
    .byt  $00,$00,$1e,$02,$3e,$32,$3e,$00,$30,$30,$3e,$32,$32,$32,$3e,$00
    .byt  $00,$00,$3e,$30,$30,$30,$3e,$00,$02,$02,$3e,$32,$32,$32,$3e,$00
    .byt  $00,$00,$3e,$32,$3e,$30,$3c,$00,$3e,$30,$30,$3c,$30,$30,$30,$00
    .byt  $00,$00,$3e,$32,$32,$3e,$02,$1e,$30,$30,$3c,$32,$32,$32,$32,$00
    .byt  $00,$18,$00,$18,$18,$18,$18,$00,$00,$0c,$00,$0c,$0c,$0c,$2c,$1c
    .byt  $30,$30,$32,$34,$38,$34,$32,$00,$18,$18,$18,$18,$18,$18,$18,$00
    .byt  $00,$00,$32,$3e,$32,$32,$32,$00,$00,$00,$3c,$32,$32,$32,$32,$00
    .byt  $00,$00,$3e,$32,$32,$32,$3e,$00,$00,$00,$3e,$32,$32,$3e,$30,$30
    .byt  $00,$00,$3e,$32,$32,$3e,$02,$02,$00,$00,$3e,$30,$30,$30,$30,$00
    .byt  $00,$00,$3e,$30,$3e,$02,$3e,$00,$30,$30,$3c,$30,$30,$30,$3c,$00
    .byt  $00,$00,$32,$32,$32,$32,$1e,$00,$00,$00,$32,$32,$32,$34,$38,$00
    .byt  $00,$00,$32,$32,$32,$3e,$32,$00,$00,$00,$32,$1c,$08,$1c,$32,$00
    .byt  $00,$00,$32,$32,$32,$3e,$02,$1e,$00,$00,$3e,$06,$0c,$18,$3e,$00
    .byt  $0e,$18,$18,$30,$18,$18,$0e,$00,$08,$08,$08,$08,$08,$08,$08,$08
    .byt  $38,$0c,$0c,$06,$0c,$0c,$38,$00,$00,$00,$00,$08,$00,$00,$00,$00
    .byt  $2a,$15,$2a,$15,$2a,$15,$2a,$15,$55
*/

_picture_font_2
    .byt  $00,$00,$00,$00,$00,$00,$00,$00,$06,$06,$06,$0c
    .byt  $0c,$00,$18,$18,$00,$1b,$1b,$36,$00,$00,$00,$00,$00,$16,$3f,$16
    .byt  $3f,$16,$00,$00,$0c,$1f,$3c,$1e,$0f,$3e,$0c,$00,$00,$33,$36,$0c
    .byt  $18,$33,$23,$00,$00,$18,$2c,$18,$2b,$26,$1b,$00,$00,$0c,$0c,$18
    .byt  $00,$00,$00,$00,$00,$18,$30,$30,$30,$30,$18,$00,$00,$0c,$06,$06
    .byt  $06,$06,$0c,$00,$0c,$2d,$1e,$0c,$1e,$2d,$0c,$00,$00,$0c,$0c,$3f
    .byt  $0c,$0c,$00,$00,$00,$00,$00,$00,$00,$0c,$0c,$18,$00,$00,$00,$3f
    .byt  $00,$00,$00,$00,$00,$00,$00,$00,$00,$0c,$0c,$00,$01,$03,$06,$0c
    .byt  $18,$30,$20,$00,$00,$1e,$33,$37,$3b,$33,$1e,$00,$00,$0c,$1c,$0c
    .byt  $0c,$0c,$1e,$00,$00,$1e,$33,$06,$0c,$18,$3f,$00,$00,$1e,$33,$0e
    .byt  $03,$33,$1e,$00,$30,$36,$36,$36,$3f,$06,$06,$06,$00,$3f,$30,$3e
    .byt  $03,$33,$1e,$00,$00,$1e,$30,$3e,$33,$33,$1e,$00,$00,$3f,$03,$06
    .byt  $0c,$0c,$18,$18,$00,$1e,$33,$1e,$33,$33,$1e,$00,$00,$1e,$33,$1f
    .byt  $03,$06,$1c,$00,$00,$00,$0c,$00,$00,$0c,$00,$00,$00,$00,$0c,$00
    .byt  $00,$0c,$0c,$18,$00,$0c,$18,$30,$30,$18,$0c,$00,$00,$00,$3f,$00
    .byt  $3f,$00,$00,$00,$00,$0c,$06,$03,$03,$06,$0c,$00,$00,$1e,$33,$06
    .byt  $0c,$0c,$00,$0c,$00,$1e,$33,$37,$36,$30,$1e,$00,$00,$0c,$1e,$33
    .byt  $3f,$33,$33,$30,$00,$3e,$33,$3e,$33,$33,$3e,$00,$00,$1e,$33,$30
    .byt  $30,$33,$1e,$00,$00,$3c,$36,$33,$33,$33,$3e,$00,$00,$3e,$30,$3c
    .byt  $30,$30,$3f,$00,$00,$3f,$30,$30,$3c,$30,$30,$30,$00,$1e,$33,$30
    .byt  $37,$33,$1e,$00,$03,$33,$33,$3f,$33,$33,$33,$30,$00,$1e,$0c,$0c
    .byt  $0c,$0c,$1e,$00,$00,$0f,$03,$03,$03,$33,$1e,$00,$00,$36,$3c,$38
    .byt  $3c,$36,$33,$00,$30,$30,$30,$30,$30,$30,$3f,$00,$00,$21,$33,$3f
    .byt  $3f,$33,$33,$30,$03,$33,$3b,$3f,$37,$33,$33,$30,$00,$1e,$33,$33
    .byt  $33,$33,$1e,$00,$00,$3e,$33,$33,$3e,$30,$30,$30,$00,$1e,$33,$33
    .byt  $33,$35,$16,$03,$00,$3e,$33,$3e,$3c,$36,$33,$00,$00,$1f,$30,$1e
    .byt  $03,$33,$1e,$00,$00,$3f,$0c,$0c,$0c,$0c,$0c,$0c,$30,$33,$33,$33
    .byt  $33,$33,$1e,$00,$30,$36,$36,$36,$36,$1c,$08,$00,$30,$33,$33,$3f
    .byt  $3f,$33,$21,$00,$00,$33,$3b,$0e,$1c,$37,$33,$00,$00,$33,$33,$1e
    .byt  $0c,$0c,$0c,$0c,$00,$3f,$06,$0c,$18,$30,$3f,$00,$00,$1e,$18,$18
    .byt  $18,$18,$1e,$00,$00,$30,$18,$0c,$06,$03,$01,$00,$00,$1e,$06,$06
    .byt  $06,$06,$1e,$00,$00,$0c,$1e,$3f,$0c,$0c,$0c,$0c,$00,$07,$0c,$3e
    .byt  $18,$3e,$0c,$07,$00,$1e,$2d,$3f,$2d,$33,$1e,$00,$00,$00,$1e,$03
    .byt  $1f,$33,$1f,$00,$30,$30,$3e,$33,$33,$33,$3e,$00,$00,$00,$1e,$33
    .byt  $30,$33,$1e,$00,$03,$03,$1f,$33,$33,$33,$1f,$00,$00,$00,$1e,$33
    .byt  $3f,$30,$1f,$00,$00,$0e,$1b,$18,$3c,$18,$18,$18,$00,$00,$1e,$33
    .byt  $33,$1f,$03,$1e,$30,$30,$3e,$33,$33,$33,$33,$00,$00,$0c,$00,$1c
    .byt  $0c,$0c,$1e,$00,$00,$03,$00,$07,$03,$03,$33,$1e,$30,$30,$33,$36
    .byt  $3c,$36,$33,$00,$0c,$0c,$0c,$0c,$0c,$0c,$18,$00,$00,$00,$16,$3f
    .byt  $3f,$33,$33,$00,$00,$00,$3e,$33,$33,$33,$33,$00,$00,$00,$1e,$33
    .byt  $33,$33,$1e,$00,$00,$00,$3e,$33,$33,$3e,$30,$30,$00,$00,$1f,$33
    .byt  $33,$1f,$03,$03,$00,$00,$3e,$33,$30,$30,$30,$00,$00,$00,$1f,$30
    .byt  $1e,$03,$3e,$00,$18,$18,$3c,$18,$18,$1b,$0e,$00,$00,$00,$33,$33
    .byt  $33,$3f,$1e,$00,$00,$00,$33,$33,$33,$1e,$0c,$00,$00,$00,$23,$23
    .byt  $2b,$2b,$16,$00,$00,$00,$33,$1e,$0c,$1e,$33,$00,$00,$00,$33,$33
    .byt  $33,$1f,$03,$1e,$00,$00,$3f,$06,$0c,$18,$3f,$00,$00,$0e,$18,$30
    .byt  $30,$18,$0e,$00,$0c,$1e,$2d,$3f,$33,$2d,$1e,$0c,$00,$1c,$06,$03
    .byt  $03,$06,$1c,$00,$33,$2a,$2a,$2b,$2a,$2a,$2a,$32,$3f,$3f,$3f,$3f
    .byt  $3f,$3f,$3f,$3f


_PatternSnow
	.byt %010000
	.byt %000001
	.byt %000010
	.byt %100100
	.byt %001100
	.byt %010000
	.byt %000000
	.byt %010010
	.byt %000000
	.byt %001001
	.byt %011010
	.byt %100100
	.byt %001101
	.byt %010001
	.byt %101100
	.byt %010110
	.byt %010000
	.byt %000001
	.byt %000010
	.byt %100100
	.byt %001100
	.byt %010001
	.byt %000000
	.byt %110010
	.byt %010110
	.byt %001001
	.byt %011010
	.byt %110100
	.byt %001101
	.byt %010111
	.byt %101100
	.byt %010111


_PatternBando
	.byt %000000,%000000,%000000
	.byt %000000,%000000,%000000
	.byt %000000,%000000,%000000
	.byt %000000,%000000,%000000
	.byt %000000,%000000,%000000
	.byt %000000,%000000,%000000
	.byt %000000,%000000,%000000
	.byt %000000,%000000,%000000


// 15 values (15*8 = 120 bytes)
_DitherGradient 
	; -7 => 0% [48*0]
	.byt %000000
	.byt %000000
	.byt %000000
	.byt %000000
	.byt %000000
	.byt %000000
	.byt %000000
	.byt %000000

	; -7 => 0% [48*0]
	.byt %000000
	.byt %000000
	.byt %000100
	.byt %000000
	.byt %000000
	.byt %000000
	.byt %000000
	.byt %000000

	; -6 => 7.14% [3.4 pixels] 
	.byt %100000
	.byt %000000
	.byt %000000
	.byt %001000
	.byt %000000
	.byt %000010
	.byt %000000
	.byt %000000

	; -5 => 14.28% [6.8 pixels]
	.byt %100000
	.byt %000010
	.byt %001000
	.byt %000000
	.byt %100000
	.byt %001000
	.byt %000010
	.byt %000000

	; -4 => 21.42% [11.72 pixels]
	.byt %100100
	.byt %010010
	.byt %001000
	.byt %100010
	.byt %001000
	.byt %000101
	.byt %010000
	.byt %000010

	; -3 => 28.57% [13.71 pixels]
	.byt %100100
	.byt %010010
	.byt %000100
	.byt %001001
	.byt %100100
	.byt %010010
	.byt %000100
	.byt %001001

	; -2 => 35.71% [17.85 pixels]
	.byt %100100
	.byt %010010
	.byt %001001
	.byt %010010
	.byt %100100
	.byt %010010
	.byt %001001
	.byt %010010

	; -1 => 42.85% [20.56 pixels]
	.byt %101010
	.byt %010001
	.byt %101010
	.byt %000101
	.byt %101010
	.byt %010101
	.byt %101000
	.byt %010101

	; 0	=> 50% [24 points]
	.byt %101010
	.byt %010101
	.byt %101010
	.byt %010101
	.byt %101010
	.byt %010101
	.byt %101010
	.byt %010101

	; +1 => 57.14% [27.42 pixels]
	.byt %101010
	.byt %011101
	.byt %101010
	.byt %110101
	.byt %101010
	.byt %010101
	.byt %101110
	.byt %010101

	; +2 => 64.28% [30.85 pixels]
	.byt %011011
	.byt %101101
	.byt %110110
	.byt %101101
	.byt %011011
	.byt %101101
	.byt %110110
	.byt %101101

	; +3 => 71.42% [34.28 pixels]
	.byt %011011
	.byt %101101
	.byt %111011
	.byt %110110
	.byt %011011
	.byt %101101
	.byt %111011
	.byt %110110

	; +4 => 78.57% [37.71 pixels] 
	.byt %011011
	.byt %111111
	.byt %101010
	.byt %111111
	.byt %011011
	.byt %111111
	.byt %101010
	.byt %111111

	; +5 => 85.71% [41.14 pixels]
	.byt %011111
	.byt %111101
	.byt %101111
	.byt %111111
	.byt %111011
	.byt %101111
	.byt %111101
	.byt %110111

	; +6 => 92.85% [44.56 pixels]
	.byt %011111
	.byt %111111
	.byt %111111
	.byt %111011
	.byt %111111
	.byt %111111
	.byt %110111
	.byt %111111

	.byt %111111
	.byt %111111
	.byt %101111
	.byt %111111
	.byt %111111
	.byt %111011
	.byt %111111
	.byt %111111

	; +7 => 100% [48 pixels]
	.byt %111111
	.byt %111111
	.byt %111111
	.byt %111111
	.byt %111111
	.byt %111111
	.byt %111111
	.byt %111111



_Text_RedefineCharset
.(
	ldx #0
loop
	lda _picture_font_2,x
	sta $b400+32*8,x

	lda _picture_font_2+256,x
	sta $b400+32*8+256,x

	lda _picture_font_2+512,x
	sta $b400+32*8+512,x

	dex
	bne loop
	rts
.)



_TextFadeIn
.(
	ldx #0
loop_fade
	ldy #8
loop_copy
	lda _DitherGradient,x
	sta $b400+(32*8)-1,y
	inx
	dey
	bne loop_copy

	jsr _VSync

	cpx #17*8
	bne loop_fade

	rts
.)



_TextFadeOut
.(
	ldx #17*8
loop_fade
	ldy #8
loop_copy
	lda _DitherGradient-1,x
	sta $b400+(32*8)-1,y
	dex
	dey
	bne loop_copy

	jsr _VSync

	cpx #0
	bne loop_fade

	rts
.)


_TextFadeFlash
.(
	jsr _TextFadeIn
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _TextFadeOut
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	jsr _VSync
	rts
.)




; Erase, filling with BLACK ink, all the area going from 
; $9800 to $c000 = 10240 bytes = 256*40
_ClearVideoMemory
.(
	ldx #0
loop
	sta $9800+256*0,x
	sta $9800+256*1,x
	sta $9800+256*2,x
	sta $9800+256*3,x
	sta $9800+256*4,x
	sta $9800+256*5,x
	sta $9800+256*6,x
	sta $9800+256*7,x
	sta $9800+256*8,x
	sta $9800+256*9,x

	sta $9800+256*10,x
	sta $9800+256*11,x
	sta $9800+256*12,x
	sta $9800+256*13,x
	sta $9800+256*14,x
	sta $9800+256*15,x
	sta $9800+256*16,x
	sta $9800+256*17,x
	sta $9800+256*18,x
	sta $9800+256*19,x

	sta $9800+256*20,x
	sta $9800+256*21,x
	sta $9800+256*22,x
	sta $9800+256*23,x
	sta $9800+256*24,x
	sta $9800+256*25,x
	sta $9800+256*26,x
	sta $9800+256*27,x
	sta $9800+256*28,x
	sta $9800+256*29,x

	sta $9800+256*30,x
	sta $9800+256*31,x
	sta $9800+256*32,x
	sta $9800+256*33,x
	sta $9800+256*34,x
	sta $9800+256*35,x
	sta $9800+256*36,x
	sta $9800+256*37,x
	sta $9800+256*38,x
	sta $9800+256*39,x

	dex
	bne loop
	rts
.)


_ClearTextScreen
.(
	lda #32
	ldx #0
loop
	sta $bb80+256*0,x
	sta $bb80+256*1,x
	sta $bb80+256*2,x
	sta $bb80+256*3,x
	sta $bfe0-257,x

	dex
	bne loop

	lda #0
	sta $bb80+(40*27)

	rts
.)


// Routine to clear the HIRES screen memory. It will
// be filled by the value 64 that is neutral
// 8000 bytes = 256*31 + 64  
// From $a000 to $bfdf => 8160 bytes
_ClearHiresScreen
.(
	lda #64
	ldx #0
loop
	sta $a000+256*0,x
	sta $a000+256*1,x
	sta $a000+256*2,x
	sta $a000+256*3,x
	sta $a000+256*4,x
	sta $a000+256*5,x
	sta $a000+256*6,x
	sta $a000+256*7,x
	sta $a000+256*8,x
	sta $a000+256*9,x

	sta $a000+256*10,x
	sta $a000+256*11,x
	sta $a000+256*12,x
	sta $a000+256*13,x
	sta $a000+256*14,x
	sta $a000+256*15,x
	sta $a000+256*16,x
	sta $a000+256*17,x
	sta $a000+256*18,x
	sta $a000+256*19,x

	sta $a000+256*20,x
	sta $a000+256*21,x
	sta $a000+256*22,x
	sta $a000+256*23,x
	sta $a000+256*24,x
	sta $a000+256*25,x
	sta $a000+256*26,x
	sta $a000+256*27,x
	sta $a000+256*28,x
	sta $a000+256*29,x

	sta $a000+256*30,x

	sta $a000+8160-256-1,x

	dex
	bne loop
	rts
.)





_ClearHiresTextScreenPart
.(
	lda #32
	ldx #0
loop
	sta $bb80+40*25,x

	inx
	cpx #120-1	; Avoid erasing the "back to hires" attribute
	bne loop
	rts
.)



_SwitchToHires
.(
	lda #0
	jsr _ClearVideoMemory

	; Write HIRES attribute in the last byte of video memory
	lda #30
	sta $bb80+(40*28)-1

	; Copy charset to hires area $9800
	/*
.(
	ldx #0
loop
	lda _FuturisticFont+256*0,x
	sta $9800+256*0,x
	lda _FuturisticFont+256*1,x
	sta $9800+256*1,x
	lda _FuturisticFont+256*2,x
	sta $9800+256*2,x
	lda _FuturisticFont+256*3,x
	sta $9800+256*3,x

	dex
	bne loop
.)
	*/

	; Clear the 3 lines of text
	jsr _ClearHiresTextScreenPart
	rts
.)


_SwitchToText
.(
	lda #0
	jsr _ClearVideoMemory

	// Write TEXT attribute in the last byte of video memory
	lda #26
	sta $bb80+(40*28)-1

	// Write "black ink" attribute in the first byte of last line of text memory
	// to hide the text attribute...
	lda #0
	sta $bb80+(40*27)

	; Copy charset to text area $B400
	/*
.(
	ldx #0
loop
	lda _FuturisticFont+256*0,x
	sta $B400+256*0,x
	lda _FuturisticFont+256*1,x
	sta $B400+256*1,x
	lda _FuturisticFont+256*2,x
	sta $B400+256*2,x
	lda _FuturisticFont+256*3,x
	sta $B400+256*3,x

	dex
	bne loop
.)
	*/

	rts
.)


